<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>NPA Debug Log Results</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>
<body class="container py-4">
  <h2>NPA Debug Log Parsing Results</h2>
  <div class="alert alert-info">{{ log_type_message }}</div>

  <p>
    <strong>Tenant URL:</strong>
    {% if tenant_url %}
      {{ tenant_url }}
    {% else %}
      <em>Not found in log file</em>
    {% endif %}
  </p>

  <h3 class="mt-4">Gateway RTT</h3>
  <div class="card mb-3">
    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#rtt-panel" style="cursor:pointer;">
      ðŸ”½ Show/Hide RTT Table
    </div>
    <div id="rtt-panel" class="collapse">
      <div class="card-body">{{ rtt_table|safe }}</div>
    </div>
  </div>

  <h3>Errors and Warnings</h3>
  <div class="card mb-3">
    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#errors-panel" style="cursor:pointer;">
      ðŸ”½ Show/Hide Errors and Warnings
    </div>
    <div id="errors-panel" class="collapse">
      <div class="card-body">
        {{ error_table|safe }}
      </div>
    </div>
  </div>

  <h3>Tunnel Events</h3>
  <div class="card mb-3">
    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#tunnel-panel" style="cursor:pointer;">
      ðŸ”½ Show/Hide Tunnel Events
    </div>
    <div id="tunnel-panel" class="collapse">
      <ul class="list-group list-group-flush">
        {% for e in tunnel_events %}
          <li class="list-group-item"><code>{{ e }}</code></li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <h3>NPA Private Apps</h3>
  <div class="card mb-3">
    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#apps-panel" style="cursor:pointer;">
      ðŸ”½ Show/Hide NPA Private Apps
    </div>
    <div id="apps-panel" class="collapse">
      <div class="card-body p-0">
        <table class="table table-striped mb-0">
          <thead>
            <tr>
              <th>Timestamp</th>
              <th>Hostname</th>
              <th>Policy Name</th>
              <th>App Name</th>
              <th>App Details</th>
              <th>Publishers</th>
            </tr>
          </thead>
          <tbody>
            {% for p in policy_records %}
              <tr>
                <td>{{ p.Timestamp }}</td>
                <td>{{ p.Hostname }}</td>
                <td>{{ p['Policy Name'] }}</td>
                <td>{{ p['App Name'] }}</td>
                <td><code>{{ p['App Details'] }}</code></td>
                <td>{{ p.Publishers }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
